<?xml version="1.0" encoding="utf-8"?>

<nlog autoReload="true"
      internalLogLevel="Warn"
      internalLogFile="./logs/internal-nlog.txt">

  <!-- ========================================================= -->
  <!-- Variablen -->
  <!-- ========================================================= -->
  <variable name="logDir" value="${basedir}/logs" />
  <variable name="logDate" value="${processid}" />

  <!-- ========================================================= -->
  <!-- Targets -->
  <!-- ========================================================= -->
  <targets>

    <!-- ===================================================== -->
    <!-- Datei-Log (vollst채ndig, Debug-f채hig) -->
    <!-- ===================================================== -->
    <target xsi:type="File"
            name="logFile"
            fileName="${logDir}/BauFahrplanMonitor_${logDate}.log"
            encoding="utf-8"
            keepFileOpen="false"
            createDirs="true"
            layout="${longdate}|${level:uppercase=true}|${scopeproperty:ImportFile}|${scopeproperty:Zugnr}|${scopeproperty:Verkehrstag}|${callsite:className=true:fileName=false}|${callsite-linenumber}|${message}${onexception:inner=|${exception:format=ToString}}" />

    <!-- ===================================================== -->
    <!-- Konsole (kompakt, lesbar) -->
    <!-- ===================================================== -->
    <target xsi:type="Console"
            name="console"
            layout="${longdate}|${level:uppercase=true}|${scopeproperty:ImportFile}|${scopeproperty:Zugnr}|${scopeproperty:Verkehrstag}|${logger}|${message}${onexception:inner=|${exception:format=Message}}" />

  </targets>

  <!-- ========================================================= -->
  <!-- Rules -->
  <!-- ========================================================= -->
  <rules>

    <!-- ===================================================== -->
    <!-- MultiFileImporterViewModel -->
    <!-- Debug unterdr체cken -->
    <!-- ===================================================== -->
    <logger
        name="BauFahrplanMonitor.ViewModels.MultiFileImporterViewModel"
        minlevel="Debug"
        maxlevel="Debug"
        final="true" />

    <logger
        name="BauFahrplanMonitor.ViewModels.MultiFileImporterViewModel"
        minlevel="Info"
        writeTo="logFile"
        final="true" />

    <!-- ===================================================== -->
    <!-- ZvFExportImporter -->
    <!-- Debug unterdr체cken -->
    <!-- ===================================================== -->
    <logger
        name="BauFahrplanMonitor.Importer.ZvFExportImporter"
        minlevel="Debug"
        maxlevel="Debug"
        final="true" />

    <logger
        name="BauFahrplanMonitor.Importer.ZvFExportImporter"
        minlevel="Info"
        writeTo="logFile"
        final="true" />

    <!-- ===================================================== -->
    <!-- Rest der App -->
    <!-- ===================================================== -->
    <logger
        name="*"
        minlevel="Info"
        writeTo="logFile,console" />

  </rules>

</nlog>
